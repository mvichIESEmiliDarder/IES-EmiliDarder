## Instalación de Apache
Para instalar Apache en Ubuntu server, desde la consola introducimos:

```sudo apt update
sudo apt install apache2
```

---

Resumen de los pasos y la lógica para configurar **Virtual Hosts** (servidores virtuales) en Apache2.

### 1. La Lógica de Configuración: Archivos y Directorios

Apache se gestiona principalmente a través de dos tipos de archivos de configuración:

- **Configuración General:** El archivo principal, usualmente en `/etc/apache2/apache2.conf` (en lugar de `apache.conf`), contiene directivas globales que afectan a todo el servidor.
    
- **Configuraciones de Sitios (Virtual Hosts):** Se organizan en dos directorios:
    
    - `/etc/apache2/sites-available`: Contiene archivos de configuración de sitios que **pueden** usarse.
        
    - `/etc/apache2/sites-enabled`: Contiene **enlaces simbólicos** a los archivos de `sites-available` para los sitios que **están** activos.
        

|**Directorio**|**Propósito**|
|---|---|
|`/etc/apache2/sites-available`|Plantillas y configuraciones listas para activar.|
|`/etc/apache2/sites-enabled`|Sitios web actualmente **activos** (enlaces simbólicos).|

---

### 2. Creación y Configuración del Nuevo Sitio

El objetivo de los _Virtual Hosts_ es servir múltiples **dominios** (URLs) desde el mismo servidor (ej. `www.tienda-bici.es` y `www.hostal-cama.com`).

1. **Copiar la Plantilla:** Usa la plantilla de configuración predeterminada para tu nuevo sitio.
    
    Bash
    
    ```
    cd /etc/apache2/sites-available
    sudo cp 000-default.conf tu_sitio.conf
    ```
    
2. **Configurar el Archivo `tu_sitio.conf`:** Edita este nuevo archivo. Las directivas clave que **debes** configurar dentro del bloque `<VirtualHost>` son:
    
    - **`ServerName`:** La **URL/dominio** con el que se accederá al sitio (ej. `www.tu_sitio.com`). **¡Esto es crucial!**
        
    - **`DocumentRoot`:** El **directorio raíz** donde se encuentran los archivos de tu sitio web (ej. `/var/www/tu_sitio`).
        
    - **`ServerAlias` (Opcional):** Nombres de dominio adicionales para el mismo sitio (ej. `tu_sitio.com`).
        

---

### 3. Activación y Recarga

Una vez configurado el archivo `.conf`, sigue estos pasos para activarlo:

1. **Habilitar el Sitio:** Usa el comando `a2ensite` para crear el enlace simbólico y activar el sitio.
    
    Bash
    
    ```
    sudo a2ensite tu_sitio.conf
    ```
    
2. **Verificar la Sintaxis:** Antes de recargar, asegúrate de que la configuración no tiene errores de sintaxis.
    
    Bash
    
    ```
    sudo apachectl configtest
    ```
    
    _(Debe responder: `Syntax OK`)_
    
3. **Recargar Apache:** Aplica los cambios sin interrumpir el servicio.
    
    Bash
    
    ```
    sudo systemctl reload apache2
    ```
    
    _Para un cambio mayor o si la recarga falla, usa `restart`._
    

---

### ⚠️ Aclaraciones sobre las Directivas

- La directiva **`DocumentRoot`** es la clave para indicar dónde están los archivos del sitio.
    
- **`ServerName`** es la clave para el _Virtual Host_, diciendo qué URL debe responder con esta configuración.
    
- **IP y Puerto** (ej. `<VirtualHost *:80>`) casi siempre se dejan en `*:80` (todas las IP en el puerto estándar HTTP).
    
- La directiva **`port`** no se usa dentro de los archivos de _sites-available_; el puerto se define en el bloque `<VirtualHost *:80>` y se escucha globalmente en otro archivo (`ports.conf`).