##  CMD, ENTRYPOINT, VAR y ENV

### 1\. `CMD` vs. `ENTRYPOINT`

Ambas instrucciones definen el comando con el que se ejecutar谩 el contenedor al inicio, pero con diferencias clave en c贸mo manejan la sobreescritura:

| Caracter铆stica | `ENTRYPOINT` | `CMD` |
| :--- | :--- | :--- |
| **Finalidad** | Define el **comando de ejecuci贸n de inicio**. | Define el **comando de inicio**. |
| **Sobreescritura** | **No se puede sobreescribir**. | Puede ser **sobrescrito** por cualquier comando que el usuario pase durante `docker run`. |
| **Combinaci贸n** | El `CMD` (o par谩metros extra en `docker run`) se ejecutan **despu茅s** del `ENTRYPOINT`. | Si se usa junto con `ENTRYPOINT`, act煤a como los **par谩metros por defecto** para el `ENTRYPOINT`. |
| **Uso T铆pico** | Definir la aplicaci贸n que **siempre** se ejecuta (`python app.py`). | Definir los **par谩metros por defecto** (ej. la opci贸n de ayuda `-h`). |

#### Ejemplo de C贸digo: Combinando `ENTRYPOINT` y `CMD`

**Dockerfile de Ejemplo**:

```dockerfile
FROM alpine
ENTRYPOINT ["echo", "Hola"]
CMD ["Mundo"]
```

**Comando de Construcci贸n y Ejecuci贸n**:

```bash
docker build -t test .
docker run test
# Output: Hola mundo
```

**Ejemplo de Sobreescritura de `CMD`**:

```bash
docker run test docker maniatico
# Output: Hola docker maniatico 
# (El ENTRYPOINT "echo Hola" se mantiene, y "docker maniatico" sobreescribe el CMD "mundo")
```

-----

### 2\. Argumentos (`ARG`)

Los argumentos permiten **definir variables en el Dockerfile** para variabilizar la construcci贸n de la imagen. Estas variables son t铆picamente consumidas durante la **fase de construcci贸n** (`docker build`). Estas variables solo sirven para **construir la imagen**.

#### Caracter铆sticas de `ARG`:

  * Se definen en el Dockerfile con un valor por defecto (opcional).
  * Se consumen en otras instrucciones del Dockerfile usando `$nombre_variable`.
  * Se pueden modificar en tiempo de construcci贸n usando el par谩metro `--build-arg` en `docker build`.

#### Ejemplo de C贸digo: Uso de `ARG`

**Dockerfile de Ejemplo**:

```dockerfile
ARG nombre=Mundo # Variable de construcci贸n con valor por defecto
RUN echo "Hola $nombre" > message # Uso de la variable en una instrucci贸n RUN
ENTRYPOINT ["cat", "message"] # Comando de inicio que lee el fichero
```

**Comando de Construcci贸n y Ejecuci贸n (Usando Valor por Defecto)**:

```bash
docker build -t test .
docker run test
# Output: Hola Mundo
```

**Comando de Construcci贸n y Ejecuci贸n (Modificando `ARG` en el Build)**:

```bash
docker build --build-arg nombre=YouTube -t test .
docker run test
# Output: Hola YouTube
```

-----

### 3\. Variables de Entorno (`-e`)

Las variables de entorno se utilizan para **modificar el comportamiento de una aplicaci贸n o servicio en tiempo de ejecuci贸n**. Permiten que una 煤nica imagen de contenedor se adapte a diferentes situaciones (ser **agn贸stico**).

#### Caracter铆sticas de las Variables de Entorno:

  * Se pasan al contenedor cuando se ejecuta con `docker run`.
  * Se especifican usando el par谩metro **`-e`** (o `--env`) seguido de la clave y el valor.
  * Las aplicaciones dentro del contenedor leen estas variables para configurar su comportamiento.

#### Ejemplo de C贸digo: Usando Variables de Entorno en Docker Run

Este ejemplo asume que la aplicaci贸n de Python (`app.py`) verifica la existencia de la variable de entorno `DEBUG`.

**Comando de Ejecuci贸n (Sin Variable de Entorno)**:

```bash
docker run test
# Output: Modo de depuraci贸n desactivado 
# (Asumiendo que 'test' es el nombre de la imagen con la app de Python)
```

**Comando de Ejecuci贸n (Con Variable de Entorno)**:

```bash
docker run -e DEBUG=true test
# Output: Modo de depuraci贸n activado
```

#### Ejemplo de Uso Com煤n: Bases de Datos (MariaDB)

Para bases de datos como MariaDB, se utilizan variables de entorno para definir la configuraci贸n inicial, como el usuario `root`, la contrase帽a y los nombres de las bases de datos:

```bash
docker run -e MARIADB_ROOT_PASSWORD=my-secret-pw -e MARIADB_DATABASE=my_app_db mariadb
```

*(Nota: El comando exacto var铆a seg煤n la documentaci贸n de la imagen)*

-----

驴Hay alg煤n tema en particular que te gustar铆a explorar con m谩s detalle?