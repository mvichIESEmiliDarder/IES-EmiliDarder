# ----------------------------------------------------
# CONFIGURACIÓN BÁSICA PARA DOCKER (httpd.conf)
# ----------------------------------------------------

# 1. Módulos Esenciales
# Se aseguran de que Apache puede interpretar la configuración y servir contenido.
LoadModule mpm_event_module modules/mod_mpm_event.so
LoadModule http_module modules/mod_http.so
LoadModule mime_module modules/mod_mime.so
LoadModule dir_module modules/mod_dir.so

# 2. Puerto de Escucha (Dependency requirement)
# Apache DEBE escuchar en el puerto 80 dentro del contenedor 
# para que el mapeo de puertos de Docker funcione correctamente.
Listen 80

# 3. Directorio Raíz del Servidor (ServerRoot)
# Directorio base donde se encuentran los archivos de configuración y logs.
ServerRoot "/etc/apache2"

# 4. Configuración del Servidor Principal
<VirtualHost *:80>
    # DocumentRoot: DEPENDENDE de dónde copiaste tus archivos en el Dockerfile.
    # Esta es la ruta por defecto de Apache en Alpine.
    DocumentRoot "/var/www/localhost/htdocs"
    
    # Índice: Qué archivo buscar por defecto (e.g., al visitar http://localhost:9093/)
    DirectoryIndex index.html index.php

    <Directory "/var/www/localhost/htdocs">
        # Permite acceder al contenido de este directorio
        Require all granted
    </Directory>

</VirtualHost>

# 5. Ejecución en Primer Plano (Foreground)
# Esto es CRÍTICO en Docker. Evita que Apache se ejecute como un demonio y permite
# que el contenedor permanezca activo, siendo gestionado por el CMD.
# Sin esta línea, el contenedor se iniciaría y se cerraría inmediatamente.
# El comando CMD ["httpd", "-D", "FOREGROUND"] ya se encarga de esto,
# pero es buena práctica tener la directiva ServerName (o similar) establecida.
ServerName localhost

# 6. Tipo de Mime por defecto para archivos sin extensión
DefaultType text/plain