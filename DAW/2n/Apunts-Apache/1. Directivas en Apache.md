Las **directivas** en Apache HTTP Server son **instrucciones de configuración** que le indican al servidor web cómo debe comportarse. Son la base para personalizar y gestionar prácticamente todos los aspectos del servidor, desde qué archivos servir hasta cómo manejar la seguridad y el rendimiento.

---

## ¿Qué son y dónde se encuentran?

Una directiva es esencialmente una **línea de comando** que especifica una acción o establece un valor para un parámetro.

### Ubicación

Estas directivas se encuentran principalmente en los **archivos de configuración** de Apache. Los más importantes son:

1. **`httpd.conf`** (o `apache2.conf`): El archivo de configuración principal, que contiene las directivas globales.
    
2. **Archivos incluidos**: Archivos específicos para configuraciones modulares o de _Virtual Hosts_ (como los que se encuentran en directorios como `conf-available/`, `mods-available/`, `sites-available/`, etc., dependiendo del sistema operativo y la distribución).
    
3. **`.htaccess`**: Archivos de configuración **distribuidos** que permiten a los usuarios (sin acceso a la configuración principal) anular ciertas configuraciones a nivel de directorio.
    

### Estructura de una Directiva

Generalmente, una directiva se compone de:

`Directiva Arg1, Arg2`

- **Directiva**: El nombre del comando (ej. `Listen`, `DocumentRoot`, `Options`).
    
- **Argumentos**: Valores o parámetros necesarios para que la directiva funcione (ej. un puerto, una ruta de archivo, un estado).
    

**Ejemplo:**

Apache

```
Listen 80
DocumentRoot "/var/www/html"
```

---

## Tipos de Directivas Comunes

Las directivas se pueden clasificar según su función:

### 1. Directivas de Entorno Global

Controlan la operación general del servidor:

- **`Listen`**: Especifica la dirección IP y el puerto donde el servidor debe escuchar las peticiones (ej. `Listen 80`).
    
- **`ServerName`**: Define el nombre de host y el puerto que el servidor usa para identificarse (ej. `ServerName www.ejemplo.com`).
    
- **`User`** y **`Group`**: Definen el usuario y grupo bajo el cual el servidor ejecuta los procesos hijo para servir contenido.
    

### 2. Directivas de Módulos

Apache es modular, y muchas funcionalidades se añaden a través de módulos.

- **`LoadModule`**: Carga un módulo específico en el servidor (ej. `LoadModule rewrite_module modules/mod_rewrite.so`).
    
- **Directivas específicas del módulo**: Por ejemplo, `RewriteEngine On` y `RewriteRule` son directivas del módulo `mod_rewrite`.
    

### 3. Directivas de Contenedores (Containers)

Son directivas que **agrupan otras directivas** y las aplican solo a un ámbito específico. Se definen entre etiquetas `<Directiva> ... </Directiva>`.

|Contenedor|Función|
|---|---|
|**`<VirtualHost>`**|Define la configuración para un sitio web o dominio específico (un **Host Virtual**).|
|**`<Directory>`**|Aplica configuraciones a un directorio del sistema de archivos.|
|**`<Location>`**|Aplica configuraciones a una URL específica (ruta web).|
|**`<Files>`**|Aplica configuraciones a archivos específicos por nombre.|

**Ejemplo de contenedor:**

Apache

```
<VirtualHost *:80>
    ServerName mi-dominio.com
    DocumentRoot /var/www/mi-dominio
</VirtualHost>
```

### 4. Directivas de Seguridad y Control de Acceso

Controlan el acceso al contenido:

- **`Require`**: Controla quién puede acceder a un recurso (ej. `Require all granted` o `Require ip 192.168.1.0/24`).
    
- **`Options`**: Habilita o deshabilita características específicas de un directorio, como la capacidad de ejecutar CGI, seguir enlaces simbólicos, o mostrar índices de directorio.
    

---

## Directivas y Contexto

Una característica clave es el **contexto** de una directiva, que define dónde puede ser utilizada:

- **Server config (s)**: Solo en los archivos de configuración principales (`httpd.conf`, etc.).
    
- **Virtual host (v)**: Dentro de contenedores `<VirtualHost>`.
    
- **Directory (d)**: Dentro de contenedores `<Directory>` o `<Location>`.
    
- **`.htaccess` (a)**: En los archivos de configuración distribuidos.
    

Si una directiva se usa fuera de su contexto permitido, el servidor generará un error de configuración al iniciar o recargar.