

## Instalaci贸n de Nginx

Para instalar **Nginx** en Ubuntu, primero actualiza la lista de paquetes y luego instala el servidor web:

```bash
sudo apt update
sudo apt install nginx
```

###  Verificaci贸n y Control del Servicio

Una vez instalado, el servicio de Nginx deber铆a iniciarse autom谩ticamente.

| Comando | Prop贸sito |
| :--- | :--- |
| `sudo systemctl status nginx` | Verifica si Nginx est谩 corriendo. |
| `sudo systemctl enable nginx` | Asegura que Nginx se inicie al arrancar el sistema. |
| `sudo ufw allow 'Nginx Full'` | Abre el firewall (UFW) para el tr谩fico HTTP (puerto 80) y HTTPS (puerto 443). |

-----

## Configuraci贸n de Bloques de Servidor (Server Blocks)

Los **Server Blocks** en Nginx son el equivalente funcional a los **Virtual Hosts** de Apache. Permiten hospedar m煤ltiples sitios web (dominios) en un solo servidor.

### 1\. La L贸gica de Configuraci贸n: Archivos y Directorios

Nginx organiza sus configuraciones de la siguiente manera:

  - **Configuraci贸n Principal:** El archivo principal es `/etc/nginx/nginx.conf`.

  - **Configuraciones de Bloques de Servidor:** Se organizan en directorios similares a Apache:

      - `/etc/nginx/sites-available`: Contiene archivos de configuraci贸n de sitios que **pueden** usarse (plantillas).

      - `/etc/nginx/sites-enabled`: Contiene **enlaces simb贸licos** a los archivos de `sites-available` para los sitios que **est谩n** activos.

| **Directorio** | **Prop贸sito** |
| :--- | :--- |
| `/etc/nginx/sites-available` | Plantillas y configuraciones listas para activar. |
| `/etc/nginx/sites-enabled` | Sitios web actualmente **activos** (enlaces simb贸licos). |

-----

### 2\. Creaci贸n y Configuraci贸n del Nuevo Sitio

El objetivo es servir diferentes **dominios** desde el mismo servidor.

1.  **Crear el Directorio Ra铆z para tu Sitio:** Es una buena pr谩ctica crear un directorio dedicado para los archivos de tu sitio web.

    ```bash
    sudo mkdir -p /var/www/tu_sitio_web/html
    ```

2.  **Asignar Permisos:** Aseg煤rate de que los permisos sean correctos, especialmente para el usuario `www-data` que es el que usa Nginx.

    ```bash
    sudo chown -R $USER:$USER /var/www/tu_sitio_web
    sudo chmod -R 755 /var/www/tu_sitio_web
    ```

3.  **Crear el Archivo de Configuraci贸n:** Copia la plantilla predeterminada o crea un nuevo archivo.

    ```bash
    cd /etc/nginx/sites-available
    sudo cp default tu_sitio_web.conf
    ```

4.  **Configurar el Archivo `tu_sitio_web.conf`:** Edita este archivo (p. ej., con `sudo nano tu_sitio_web.conf`) para definir tu *Server Block*. Las directivas clave son:

      - **`server_name`:** El **dominio/URL** con el que se acceder谩 al sitio (ej. `www.tu_sitio.com`). 隆**Esto es crucial** para distinguir los Server Blocks\!

      - **`root`:** El **directorio ra铆z** donde se encuentran los archivos de tu sitio web (el equivalente a `DocumentRoot` en Apache).

#### Plantilla B谩sica de Server Block:

```nginx
server {
    listen 80; # Escucha el puerto est谩ndar HTTP
    listen [::]:80; # IPv6

    # 隆CLAVE! El nombre de dominio al que responder谩 este bloque
    server_name tu_sitio.com www.tu_sitio.com; 

    # 隆CLAVE! La ruta al directorio ra铆z de los archivos
    root /var/www/tu_sitio_web/html;

    index index.html index.htm index.nginx-debian.html;

    location / {
        try_files $uri $uri/ =404;
    }

    # ... Otras configuraciones (logs, SSL, etc.)
}
```

-----

### 3\. Activaci贸n y Recarga

Una vez configurado el archivo `.conf`, sigue estos pasos para activarlo:

1.  **Crear el Enlace Simb贸lico (Habilitar el Sitio):** Crea un enlace del archivo en `sites-available` al directorio `sites-enabled`.

    ```bash
    sudo ln -s /etc/nginx/sites-available/tu_sitio_web.conf /etc/nginx/sites-enabled/
    ```

    >  **Nota:** Nginx no tiene un comando dedicado como `a2ensite`, se usa `ln -s` directamente.

2.  **Verificar la Sintaxis:** Antes de aplicar los cambios, verifica si la configuraci贸n no tiene errores.

    ```bash
    sudo nginx -t
    ```

    *(Debe responder: `syntax is ok` y `test is successful`)*

3.  **Recargar Nginx:** Aplica los cambios sin interrumpir el servicio.

    ```bash
    sudo systemctl reload nginx
    ```

    *Para un cambio mayor o si la recarga falla, usa `restart`: `sudo systemctl restart nginx`.*

-----

### 锔 Aclaraciones sobre las Directivas

  - La directiva **`root`** es la clave para indicar d贸nde est谩n los archivos del sitio.

  - **`server_name`** es la clave para el *Server Block*, indicando qu茅 URL debe responder con esta configuraci贸n.

  - La directiva **`listen 80;`** define el puerto.

  - El bloque **`location / { ... }`** define c贸mo Nginx maneja las peticiones para la ruta base (`/`).